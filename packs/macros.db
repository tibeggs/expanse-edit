{"name":"Roll Inititave","permission":{"default":0,"1afqZKk8f6I218oB":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"main()\r\n\r\nasync function main(){\r\n    console.log(\"Hello World\")\r\n    //Is a token selected? If not, error\r\n    console.log(\"Tokens: \", canvas.tokens.controlled)\r\n    if(canvas.tokens.controlled.length == 0 || canvas.tokens.controlled.length > 1){\r\n        ui.notifications.error(\"Please select a single token\");\r\n        return;\r\n\t}\r\n    let actor = canvas.tokens.controlled[0].actor\r\n    let ability = \"Dexterity\";\r\n    let focus = \"Initiative\";\r\n    console.log(\"Actor: \", actor, \", Ability: \", ability, \", Focus: \", focus);\r\n    let initiative = new game.expanse.AgeRoll(actor, ability, focus);\r\n    console.log(initiative);\r\n    initiative.render().then((content) => {\r\n        ChatMessage.create({\r\n            user: game.user._id,\r\n            speaker: ChatMessage.getSpeaker({ actor: actor }),\r\n            content: content,\r\n        });\r\n    });\r\n}","author":"1afqZKk8f6I218oB","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"P3T4XAa6osDa6Em4"}
{"name":"Roll Abilities","permission":{"default":0,"1afqZKk8f6I218oB":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"main();\r\nmain();\r\nmain();\r\nmain();\r\nmain();\r\nmain();\r\nmain();\r\nmain();\r\nmain();\r\nasync function main(){\r\n    let value = 0;\r\n    let r = new Roll(\"3d6\").roll();\r\n    console.log(\"roll:\", r);\r\n\tlet ability = r.result;\r\n    console.log(ability);\r\n\r\n    if (ability == 3) {\r\n        value = -2;\r\n    }\r\n    else if (ability == 4 || ability == 5 ) {\r\n        value = -1;\r\n    }\r\n        else if (ability == 9 || ability == 10 || ability == 11 ) {\r\n        value = 1;\r\n    }\r\n            else if (ability == 12 || ability == 13 || ability == 14 ) {\r\n        value = 2;\r\n    }\r\n            else if (ability == 15 || ability == 16 || ability == 17 ) {\r\n        value = 3;\r\n    }\r\n            else if (ability == 18) {\r\n        value = 4;\r\n    }\r\n    console.log(\"value:\", value);\r\n\tr.toMessage({\r\n\t\tflavor: `<h1><b>Ability Score: ${value}</b></h1>`,\r\n\t});\r\n}","author":"1afqZKk8f6I218oB","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"PBGrYosunGoPInHA"}
{"_id":"dgsBjuNTIMAuC704","name":"AgeRoll Query","permission":{"default":0,"1afqZKk8f6I218oB":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"main()\r\n\r\nasync function main(){\r\n\tconsole.log(\"Hello World\")\r\n\t//Is a token selected? If not, error\r\n\tconsole.log(\"Tokens: \", canvas.tokens.controlled)\r\n\tif(canvas.tokens.controlled.length == 0 || canvas.tokens.controlled.length > 1){\r\n\t    ui.notifications.error(\"Please select a single token\");}\r\n\r\n\tnew Dialog({\r\n\t\ttitle: \"Roll Query\",\r\n\t\tcontent: `\r\n\t\t\t<p>Select the approperate Ability, Focus, and additional modifiers.</p>\r\n\t\t\t<form>\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<label>Ability</label>\r\n\t       \t\t<select id=\"ability\" placeholder=\"Ability\">\r\n\t\t\t\t\t<option value=\"Accuracy\">Accuracy</option>\r\n\t\t\t\t\t<option value=\"Communication\">Communication</option>\r\n\t\t\t\t\t<option value=\"Constitution\">Constitution</option>\r\n\t\t\t\t\t<option value=\"Dexterity\">Dexterity</option>\r\n\t\t\t\t\t<option value=\"Fighting\">Fighting</option>\r\n\t\t\t\t\t<option value=\"Intelligence\">Intelligence</option>\r\n\t\t\t\t\t<option value=\"Perception\">Perception</option>\r\n\t\t\t\t\t<option value=\"Strength\">Strength</option>\r\n\t\t\t\t\t<option value=\"Willpower\">Willpower</option>\r\n\t       \t\t</select>\r\n      \t\t</div>\r\n\t      \t<div class=\"form-group\">\r\n\t       \t\t<label>Focus</label>\r\n\t\t\t\t<select id=\"focus-dropdown\">\r\n\t\t\t\t</select>\r\n\t\t\t\t<script>\r\n\t\t\t\t\ttarget = canvas.tokens.controlled[0].actor;\r\n\t\t\t\t\tfocusList = target.items.filter(i => i.type == \"Focus\");\r\n\t\t\t\t\tselect = document.getElementById(\"focus-dropdown\"); \r\n\t\t\t\t\tfor(let i = 0; i < focusList.length; i++) {\r\n\t\t\t\t\t    let opt = focusList[i].data.name;\r\n\t\t\t\t\t    let el = document.createElement(\"option\");\r\n\t\t\t\t\t    el.textContent = opt;\r\n\t\t\t\t\t    el.value = opt;\r\n\t\t\t\t\t    select.appendChild(el);}\r\n\t\t\t\t</script>\r\n\t      \t</div>\r\n\t      \t<div class=\"form-group\">\r\n\t       \t\t<label>Modifier</label>\r\n\t       \t\t<input type=\"text\" inputmode=\"numeric\" pattern=\"\\d*\" id=\"mod\" value=\"0\">\r\n\t      \t</div>\r\n     \t\t</form>\r\n\t\t`,\r\n\t    buttons: {\r\n\t\t\tone: {\r\n\t        \ticon: '<i class=\"fas fa-check\"></i>',\r\n\t        \tlabel: \"Confirm\",\r\n\t        \tcallback: (html) =>{\r\n\t\t\t\t\tlet ability = html.find('[id=ability]')[0].value;\r\n\t\t\t\t\tlet focus = html.find('[id=focus-dropdown]')[0].value;\r\n\t          \t\tlet mod = 0; \r\n\t\t\t\t\tmod = parseInt(html.find('[id=mod]')[0].value);\r\n\t          \t\tconsole.log(\"target: \", target, \", Ability: \", ability, \", Focus: \", focus, \", Mod: \", mod);\r\n\t    \t\t\tlet roll = new game.expanse.AgeRollMod(target, ability, focus, mod);\r\n\t    \t\t\tconsole.log(roll);\r\n\t    \t\t\troll.render().then((content) => {\r\n\t        \t\t\tChatMessage.create({\r\n\t            \t\t\tuser: game.user._id,\r\n\t            \t\t\tspeaker: ChatMessage.getSpeaker({ actor: target }),\r\n\t            \t\t\tcontent: content,\r\n\t        \t\t\t});\r\n\t    \t\t\t});\r\n\t        \t}\r\n      \t\t},\r\n\t      \ttwo: {\r\n\t        \ticon: '<i class=\"fas fa-times\"></i>',\r\n\t        \tlabel: \"Cancel\",\r\n\t      \t}\r\n\t\t},\r\n\t    default: \"Cancel\"\r\n  \t}).render(true);\r\n}","author":"1afqZKk8f6I218oB","img":"icons/svg/dice-target.svg","actorIds":[]}
